{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://raw.githubusercontent.com/RNABioInfo/rna-interaction-specification/rna-interaction-schema_v1.json",
	"title": "RNA-RNA/Protein Interaction Format",
	"description": "The RNA Interaction Format (RIF) is focused on capturing RNA interactions in a convenient to use format.",
	"type": "array",
	"minItems": 1,
	"uniqueItems": true,
	"items": {
		"type": "object",
		"properties": {
			"ID": {
				"type": "string",
				"description": "The unique identifier for an interaction",
                "pattern": "^[0-9a-zA-z-_]*$"
			},
            "version": {
                "type": "string",
                "description": "The file version of RIF. Currently only RIFv1.0 allowed",
                "pattern": "^RIFv1.0$"
            },
			"class": {
				"enum": ["RNA-RNA", "RNA-Protein", "RNA-RNA-Protein"],
                "description": "The class of the described interaction"
			},
			"type": {
				"type": "string",
                "description": "The type of interaction, i.e. molecular mechanism"
			},
			"evidence": {
				"type": "array",
				"description": "Evidence that supports the interaction",
				"minItems": 1,
				"uniqueItems": true,
				"items": {
					"type": "object",
					"properties": {
						"type": {
							"description": "Type of evidence (e.g., prediction, experimental)",
							"type": "string"
						},
						"method": {
							"description": "Tools or laboratory techniques used",
							"type": "string"
						},
						"command": {
							"description": "Command of the computational method",
							"type": "string"
						},
						"data": {
                            "description": "Data that supports the interaction",
                            "type": "object",
                            "additionalProperties": {
                                "oneOf": [
                                    {
                                        "type": "object",
                                        "additionalProperties": {
                                            "not": { "type": "object" }
                                        }
                                    },
                                    {
                                        "not": { "type": "object" }
                                    }
                                ]
                            }
						}
					},
                    "additionalProperties": false,
					"required": ["type", "method", "data"]
				}
			},
			"partners": {
				"type": "array",
                "description": "RNA/Proteins involved in the interaction",
				"items": {
					"type": "object",
					"properties": {
						"name": {
							"description": "Description of the RNA/Protein",
							"type": "string"
						},
						"symbol": {
							"description": "Scientific naming of the RNA/protein",
							"type": "string"
						},
						"type": {
							"description": "Type of the of the RNA/Protein. Should match entry in sequence ontology",
							"type": "string"
						},
						"sequence_type": {
							"description": "Type of sequence which can be either DNA, RNA or Protein",
							"enum": ["dna","rna","protein"]
						},
						"genomic_coordinates": {
							"description": "chromosome, strand and genomic coordinates of the RNA/Protein",
							"type": "string",
                            "pattern": "[a-zA-Z0-9]+:[+-]:[0-9]+-[0-9]+"
						},
						"organism_name": {
							"description": "Name of the organism",
							"type": "string"
						},
                        "organism_acc": {
							"description": "Unique accession id of the organism",
							"type": "string"
                        },
						"local_sites": {
                            "description": "Interaction sites of the organism",
							"type": "object",
                            "patternProperties": {
								"^.*$": {
                                    "type": "array",
                                    "items": {
                                        "type": "array",
                                        "minItems": 2,
                                        "maxItems": 2,
                                        "items": {
                                            "type": "number"
                                        }
                                    }
                                }
                            }
						},
						"info": {
							"type": "object",
                            "properties": {
                                "description": {
                                    "type": "string",
                                    "description": "Summary of the "
                                },
                                "sequence": {
                                    "type": "string",
                                    "description": "The sequence of the RNA/Protein",
                                    "pattern": "^([ATGC]*|[ARNDCQEGHILKMFPSTWYV]*)$"
                                },
                                "structure": {
                                    "type": "string",
                                    "description": "The structure of the RNA in dot-bracket notation",
                                    "pattern": "^[.()]*$"
                                },
                                "note": {
                                    "type": "string"
                                }
                            },
                            "additionalProperties":true
						},
						"custom": {
							"type": "object"
						}
					},
                    "additionalProperties": false,
					"required": ["name", "type", "local_sites"]
				}
			}
		},
        "additionalProperties": false,
		"required": ["ID", "version", "class", "type", "evidence", "partners"]
	}
}
